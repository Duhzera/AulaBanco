CREATE DATABASE "LBD"
    ENCODING = 'WIN1252'
    CONNECTION LIMIT = -1
	TEMPLATE = TEMPLATE0;


CREATE TABLE tb_cliente(
	id_cliente integer,
	titulo char(4),
	nome varchar(32) CONSTRAINT nn_cliente_nome not null,
	sobrenome varchar(32) CONSTRAINT nn_cliente_sobrenome not null,
	endereco varchar(60) CONSTRAINT nn_cliente_endereco not null,
	numero varchar(5) CONSTRAINT nn_cliente_numero not null,
	complemento varchar(62),
	cep varchar(10),
	cidade varchar(62) CONSTRAINT nn_cliente_cidade not null,
	estado char(2) CONSTRAINT nn_cliente_estado not null,
	fone_fixo varchar(15) CONSTRAINT nn_cliente_fone_fixo not null,
	fone_movel varchar(15) CONSTRAINT nn_cliente_fone_movel not null,
	fg_ativo INTEGER,
	CONSTRAINT pk_cliente_id_cliente PRIMARY key(id_cliente)
);

CREATE TABLE tb_item(
	id_item integer,
	ds_item varchar(64) CONSTRAINT nn_item_ds_item NOT NULL,
	preco_custo numeric(7,2),
	preco_venda numeric(7,2),
	fg_ativo integer,
	CONSTRAINT pk_item_id_item PRIMARY KEY(id_item)
);
CREATE TABLE tb_item_pedido(
id_item      INTEGER,
id_pedido    INTEGER CONSTRAINT nn_item_pedido NOT NULL,
quantidade   INTEGER,
CONSTRAINT pk_item_pedido PRIMARY KEY(id_item, id_pedido),
CONSTRAINT fk_item_pedido_id_item FOREIGN KEY(id_pedido) REFERENCES tb_item(id_item),
CONSTRAINT fk_item_pedido_id_pedido FOREIGN KEY(id_pedido) REFERENCES tb_pedido(id_pedido));

CREATE TABLE tb_codigo_barras(
codigo_barras    INTEGER CONSTRAINT nn_cod_barras_codigo_barras NOT NULL,
id_item          INTEGER CONSTRAINT nn_cod_barras_id_item NOT NULL, CONSTRAINT fk_cod_barras_id_item(id_item) REFERENCES tb_item(id_item));

CREATE TABLE tb_estoque (
id_item      INTEGER,
quantidade   INTEGER,
CONSTRAINT pk_estoue_id_item PRIMARY KEY(id_item),
CONSTRAINT fk_estoque_id_item FOREIGN KEY (id_item) REFERENCES tb_item(id_item));


INSERT INTO tb_cliente (id_cliente,titulo,nome,sobrenome,endereco,numero,complemento,cep,cidade,estado,fone_fixo,fone_movel,fg_ativo)

VALUES
(1,'Sra','Jessica','Mendes','Avenida Acelino de Leao','89',NULL,'68900 300', 'Macapá', 'AP','3565 1243','8765 8999',1),
(2,'Sr','Andrei','Junqueira','Rua Tabaires','1024',NULL,'30150 450', 'Belo Horizonte', 'MG','3676 1209','8876 4543',1),
(3,'Sr','Alex','Matheus','Rua Eva Terpins','s/n',NULL,'05327 030', 'São Paulo', 'SP','6576 0099','9358 7676',1);

